"""
# ì‹œì‘) 4:43 / ë) 6:16 => ì™œ ì‹œê°„ì„ ì¤„ì´ì§ˆ ëª» í•˜ë‹ˆ ì™œ!!
[ë¬¸ì œ ì„¤ëª…]
- N * N ê²©ì ì•ˆì—ì„œ ì§„í–‰  2 <= N <= 20
    - ê°ê°ì˜ ê²©ìì—ëŠ” ë¬´ê¸°ê°€ 'ì—¬ëŸ¬ê°œ' ìˆì„ ìˆ˜ ìˆë‹¤.
    - ì´ˆê¸°ì—ëŠ” ë¬´ê¸°ê°€ ì—†ëŠ” ë¹ˆ ê²©ìì— í”Œë ˆì´ì–´ë“¤ì´ ìœ„ì¹˜
- ê° í”Œë ˆì´ì–´ëŠ” ë‹¤ìŒê³¼ ê°™ì€ ì •ë³´ë¥¼ ì§€ë‹Œë‹¤. 1 <= M <= 30(ìµœëŒ€)
    1. ì´ˆê¸° ëŠ¥ë ¥ì¹˜ (ëª¨ë‘ ë‹¤ë¦„)
    2. ë²ˆí˜¸
    3. ë°©í–¥
    4. ì ìˆ˜
    5. ìœ„ì¹˜ ì¢Œí‘œ (r, c)
- ì˜¤ë¥¸ìª½ 90ë„ íšŒì „ (ìƒ-ìš°-í•˜-ì¢Œ)ì— ë§ëŠ” ë¸íƒ€ ë°°ì—´ í•„ìš”(ì…ë ¥ í˜•ì‹ì— ëª…ì‹œë˜ì–´ìˆìŒ)
[ì •ë‹µ]
- ê°ê° í”Œë ˆì´ì–´ë“¤ì´ íšë“í•œ ì ìˆ˜ë¥¼ ìŠ¤í˜ì´ìŠ¤ë¥¼ í¬í•¨í•´ í•œ ì¤„ì— ì¶œë ¥í•œë‹¤.
"""
import sys
sys.stdin = open('input.txt', 'r')


# ì…ë ¥ ë³€ìˆ˜
N, M, K = map(int, input().split())
grid = list(list(map(int, input().split())) for _ in range(N))

# ì´ ì €ì¥ => 3ì°¨ì› ë°°ì—´. í•œ ìœ„ì¹˜ì— ì´ì´ ì—¬ëŸ¬ê°œ ìˆì„ ìˆ˜ ìˆë‹¤.
guns = [[[] for _ in range(N)] for _ in range(N)]

for r in range(N):
    for c in range(N):
        guns[r][c].append(grid[r][c])

# í”Œë ˆì´ì–´ ë³€ìˆ˜
x, y = [0] * M, [0] * M  # í–‰, ì—´
d, s, g = [0] * M, [0] * M, [0] * M  # ë°©í–¥, ì´ˆê¸° ëŠ¥ë ¥ì¹˜, ì†Œì§€í•œ ì´ ê³µê²©ë ¥
point = [0] * M  # ì ìˆ˜

for i in range(M):
    _x, _y, _d, _s = map(int, input().split())  # ì…ë ¥ê°’ 1ë¶€í„° ì‹œì‘í•˜ëŠ”ê±° ì¡°ì‹¬^^...
    x[i], y[i], d[i], s[i] = _x-1, _y-1, _d, _s

# ê·¸ ì™¸ ì „ì—­ ë³€ìˆ˜
dr = [-1, 0, 1, 0]  # ìƒ ìš° í•˜ ì¢Œ
dc = [0, 1, 0, -1]


# ì¶œë ¥ í•¨ìˆ˜
def print_players():
    for i in range(M):
        print(f"{i} ë²ˆì§¸ => ìœ„ì¹˜ : {x[i], y[i]} | ë°©í–¥ : {d[i]} | ëŠ¥ë ¥ : {s[i]} | ì´ : {g[i]}")
    print(f"ì´ ì ìˆ˜ {point}")
    print()


def in_range(r, c):
    return 0 <= r < N and 0 <= c < N


# - ë³¸ì¸ì´ í–¥í•˜ëŠ” ë°©í–¥ëŒ€ë¡œ 'í•œ ì¹¸' ë§Œí¼ ì´ë™
# - ê²©ìë¥¼ ë²—ì–´ë‚˜ë©´ ì •ë°˜ëŒ€ ë°©í–¥ìœ¼ë¡œ 'í•œ ì¹¸' ë§Œí¼ ì´ë™
def move(p):
    px, py = x[p], y[p]
    pd = d[p]

    # [ì´ëŸ°ì‹¤ìˆ˜í•˜ì§€ë§ë¼ê³ ğŸ¤¬] drì„ ì™œ ë‘ë²ˆ ì“°ëŠ”ë°
    if not in_range(px + dr[pd], py + dc[pd]):
        d[p] = (pd+2) % 4  # ë°˜ëŒ€ë°©í–¥
        # [ì´ëŸ°ì‹¤ìˆ˜í•˜ì§€ë§ë¼ê³ ğŸ¤¬] ì™œ ë°©í–¥ ì—…ë°ì´íŠ¸ë§Œ í•˜ê³  ë°˜í™˜í•˜ëŠ”ê±´ ê·¸ëŒ€ë¡œ í–ˆëŠ”ë°
        pd = d[p]

    return px + dr[pd], py + dc[pd]


def find_player(r, c):
    for other in range(M):
        # ê°€ê³  ì‹¶ì€ ìœ„ì¹˜ë¥¼ ì •í•œ í”Œë ˆì´ì–´ëŠ” ì•„ì§ ì›€ì§ì´ì§€ ì•Šì•˜ë‹¤.
        # ê·¸ë˜ì„œ ì–´ì°¨í”¼ ê·¸ ìœ„ì¹˜ê°€ ì•„ë‹ˆë‹ˆê¹ ë³¸ì¸ì¸ì§€ í™•ì¸ ì•ˆí•´ë„ ëœë‹¤.
        # [ì´ëŸ°ì‹¤ìˆ˜í•˜ì§€ë§ë¼ê³ ğŸ¤¬] ì•„ë‹ˆë‹¤.. ì§€ê³  ë‹¤ì‹œ ì›ë˜ ìˆë˜ ìë¦¬ë¡œ ëŒì•„ê°€ì•¼í•  ë•Œê°€ ìˆë‹¤..
        # [ì´ëŸ°ì‹¤ìˆ˜í•˜ì§€ë§ë¼ê³ ğŸ¤¬] ì™€..^^ ì´ê¸´ì• ë„ ì•„ì§ ì•ˆì›€ì§ì—¬ì„œ.. ë¯¸ì¹˜ê² ë„¤^^
        # Mì˜ ìµœëŒ€ê°’ì€ 30ì´ê³ , ì´ í•¨ìˆ˜ëŠ” ìµœëŒ€ 30*30*500 ì´ë¯€ë¡œ ì‹œê°„ë‚´ ê°€ëŠ¥
        if x[other] == r and y[other] == c:
            return other
    return -1  # ì•„ë¬´ë„ ì—†ìœ¼ë©´ -1 ë°˜í™˜


# [ì´ íšë“]
# - í”Œë ˆì´ì–´ì˜ ì´ì„ ê²©ìì— ë‚´ë ¤ë‘”ë‹¤.
# - ê°€ì¥ ìˆ ì´ì„ íšë“í•œë‹¤.
def check_gun(p):
    r, c = x[p], y[p]
    # í”Œë ˆì´ì–´ê°€ ì´ì„ ê°–ê³  ìˆë‹¤ë©´ ì „ì²´ ë¹„êµë¥¼ ìœ„í•´ ë‚´ë ¤ë†“ëŠ”ë‹¤.
    if g[p]:
        guns[r][c].append(g[p])

    # [ì´ëŸ°ì‹¤ìˆ˜í•˜ì§€ë§ë¼ê³ ğŸ¤¬] ì´ì´ ì—†ìœ¼ë©´ max() í•¨ìˆ˜ì—ì„œ ValueError ë°œìƒ
    if guns[r][c]:
        # ê°€ì¥ ìˆ ì´ì„ ì°¾ëŠ”ë‹¤.
        strongest = max(guns[r][c])
        # ê°€ì¥ ìˆ ì´ì„ í”Œë ˆì´ì–´ì—ê²Œ ì¤€ë‹¤.
        g[p] = strongest
        # í”Œë ˆì´ì–´ì—ê²Œ ì¤¬ìœ¼ë‹ˆê¹ í˜„ì¬ ìœ„ì¹˜ì— ê·¸ ì´ì€ ë” ì´ìƒ ì—†ë‹¤.
        guns[r][c].remove(strongest)


# (ì´ˆê¸° ëŠ¥ë ¥ì¹˜ + ì´ì˜ ê³µê²©ë ¥)ë¥¼ ê°ê° ë¹„êµí•œë‹¤.
#  - ê°™ì„ ê²½ìš° ì´ˆê¸° ëŠ¥ë ¥ì¹˜ê°€ ë†’ì€ í”Œë ˆì´ì–´ê°€ ì´ê¸´ë‹¤.
#  - ì´ê¸´ í”Œë ˆì´ì–´ëŠ” ê³µê²©ë ¥ í•©ì˜ ì°¨ì´ë§Œí¼ í¬ì¸íŠ¸ë¥¼ íšë“í•œë‹¤. (ì ìˆ˜ ê¸°ë¡ í•„ìš”)
def fight(p1, p2):
    p1_attack = s[p1] + g[p1]
    p2_attack = s[p2] + g[p2]
    diff = abs(p1_attack - p2_attack)

    if p1_attack > p2_attack:
        return p1, p2, diff
    elif p1_attack < p2_attack:
        return p2, p1, diff
    else:
        if s[p1] > s[p2]:
            return p1, p2, diff
        else:
            return p2, p1, diff


#   - ìì‹ ì˜ ì´ì„ í•´ë‹¹ ê²©ìì— ë‚´ë ¤ë†“ê³ , ì›ë˜ ë°©í–¥ëŒ€ë¡œ ì´ë™í•œë‹¤.
#   - ì´ë•Œ ì´ë™í•˜ë ¤ëŠ” ì¹¸ì—
#       1. í”Œë ˆì´ì–´ê°€ ìˆê±°ë‚˜ 2. ê²©ì ë°–ì¸ ê²½ìš° -> ì˜¤ë¥¸ìª½ìœ¼ë¡œ 90ë„ì”© íšŒì „í•˜ì—¬ ë¹ˆì¹¸ ì°¾ì•„ ì´ë™
#           - ì´ì— ë§ì¶° ë¸íƒ€ ë°°ì—´ ë§Œë“¤ì.
#   - ì´ë™í•œ ë’¤, [ì´ íšë“]
#       -> í•´ë‹¹ ì¹¸ì— ì´ì´ ìˆë‹¤ë©´ ê°€ì¥ ê³µê²©ë ¥ì´ ë†’ì€ ì´ì„ íšë“í•˜ê³  ë‚˜ë¨¸ì§€ ì´ì€ ë‚´ë²„ë ¤ë‘”ë‹¤.
def lose(loser):
    r, c = x[loser], y[loser]
    if g[loser]:
        guns[r][c].append(g[loser])
        g[loser] = 0

    for i in range(4):
        new_d = (d[loser] + i) % 4  # ê°€ë³´ë ¤ëŠ” ë°©í–¥ì—
        new_r, new_c = r + dr[new_d], c + dc[new_d]
        if in_range(new_r, new_c) and find_player(new_r, new_c) == -1:
            x[loser], y[loser], d[loser] = new_r, new_c, new_d
            check_gun(loser)
            break


# - diff ë§Œí¼ ì ìˆ˜ë¥¼ ì–»ëŠ”ë‹¤.
# - row, colë¡œ ì´ë™í•œë‹¤.
# - ì´ì„ íšë“í•œë‹¤.
def win(winner, diff):
    point[winner] += diff
    check_gun(winner)


def solution():
    # í•˜ë‚˜ì˜ ë¼ìš´ë“œ ì§„í–‰
    for _ in range(K):
        # 1. ì²« ë²ˆì§¸ í”Œë ˆì´ì–´ë¶€í„° ìˆœì°¨ì ìœ¼ë¡œ
        for p in range(M):
            new_x, new_y = move(p)  # í”Œë ˆì´ì–´ì˜ ë°©í–¥ì— ë§ì¶° ì´ë™ 'í•  ì˜ˆì •ì˜' ì¢Œí‘œ ë°˜í™˜
            other = find_player(new_x, new_y)  # ë‹¤ë¥¸ ì‚¬ëŒì´ ìˆëŠ”ì§€ í™•ì¸. ì—†ìœ¼ë©´ -1

            # [ì´ëŸ°ì‹¤ìˆ˜í•˜ì§€ë§ë¼ê³ ğŸ¤¬] ì—¬ê¸°ì„œ pì˜ ìœ„ì¹˜ ì—…ë°ì´íŠ¸ë¥¼ í•´ì¤˜ì•¼ë§Œ í•˜ëŠ” ì´ìœ . (ì´ê±¸ ë˜ í‹€ë¦¬ë‹ˆ)
            # ì¼ë‹¨ ê°€ë ¤ëŠ” ê³³ì— ì‚¬ëŒì´ ìˆë“  ë§ë“  ê·¸ ìœ„ì¹˜ë¡œ ê°€ì•¼í•œë‹¤. ì‚¬ëŒì´ ìˆëŠ” ê²½ìš°ì—” ë‘˜ ë‹¤ new_x, new_yì—ì„œ ì‹¸ìš´ë‹¤.
            # ì—¬ê¸°ì„œ ì—…ë°ì´íŠ¸ í•˜ì§€ ì•Šìœ¼ë©´ ì§„ ì‚¬ëŒì´ ì›€ì§ì¼ ë•Œ ë‹¤ìŒ ìœ„ì¹˜ë¥¼ ì°¾ëŠ” ê³¼ì •ì—ì„œ
            # ìê¸°ë‘ ê²¹ì¹˜ê³  ì´ê¸´ ì‚¬ëŒì´ë‘ ê²¹ì¹˜ê³  ë‚œë¦¬ë‚œë‹¤.
            x[p], y[p] = new_x, new_y

            # 2-1. ì´ë™í•  ë°©í–¥ì— í”Œë ˆì´ì–´ê°€ 'ì—†ë‹¤'
            if other == -1:
                check_gun(p)  # ì´ì„ í™•ì¸í•œë‹¤.
            # 2-2.  ì´ë™í•  ë°©í–¥ì— ë‹¤ë¥¸ í”Œë ˆì´ì–´ê°€ 'ìˆë‹¤'
            else:
                # 1) ì‹¸ìš´ë‹¤.
                winner, loser, diff = fight(p, other)  # ìƒëŒ€ë°©ì´ ìˆìœ¼ë©´ ì‹¸ì›Œì„œ ê²°ê³¼ ë°˜í™˜
                # 2) ì§„ ì‚¬ëŒ
                lose(loser)  # ì§„ ì‚¬ëŒ ì²˜ë¦¬
                # 3) ì´ê¸´ ì‚¬ëŒ
                win(winner, diff)  # ì´ê¸´ ì‚¬ëŒ ì²˜ë¦¬
    print(*point)

solution()